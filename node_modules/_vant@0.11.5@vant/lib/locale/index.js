'use strict';

exports.__esModule = true;
exports.i18n = undefined;

var _vue = require('vue');

var _vue2 = _interopRequireDefault(_vue);

var _utils = require('../utils');

var _deepAssign = require('../utils/deep-assign');

var _deepAssign2 = _interopRequireDefault(_deepAssign);

var _zhCN = require('./lang/zh-CN');

var _zhCN2 = _interopRequireDefault(_zhCN);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// component mixin
var i18n = {
  computed: {
    $t: function $t() {
      var name = this.$options.name;

      var prefix = name ? (0, _utils.camelize)(name) + '.' : '';
      var messages = this.$vantMessages[this.$vantLang];

      return function (path) {
        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }

        var message = (0, _utils.get)(messages, prefix + path) || (0, _utils.get)(messages, path);
        return typeof message === 'function' ? message.apply(null, args) : message;
      };
    }
  }
};

var proto = _vue2.default.prototype;
var defaultLang = 'zh-CN';
var locale = {
  i18n: i18n,

  init: function init() {
    var _Vue$util$defineReact;

    _vue2.default.util.defineReactive(proto, '$vantLang', defaultLang);
    _vue2.default.util.defineReactive(proto, '$vantMessages', (_Vue$util$defineReact = {}, _Vue$util$defineReact[defaultLang] = _zhCN2.default, _Vue$util$defineReact));
  },
  use: function use(lang, messages) {
    var _add;

    proto.$vantLang = lang;
    this.add((_add = {}, _add[lang] = messages, _add));
  },
  add: function add() {
    var messages = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    (0, _deepAssign2.default)(proto.$vantMessages, messages);
  }
};

locale.init();
exports.default = locale;
exports.i18n = i18n;